<!DOCTYPE html>
<html class="h-100">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>TO-DO Alvaro Leiva</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="">
        <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
        crossorigin="anonymous"
      />
      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css"
      />
      <link 
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
      <style>
          .body{
            display: flex;
            flex:1;
            flex-direction: column;
            align-items: center;
           
          }
          .upperBar{
              display: flex;
              justify-content: center;
              width: 60%;
              height: 8%;
              color: white;
              font-size: x-large;
              background-color: green;
          }
          .inputButtom{
              display: flex;
              justify-content: center;
              width: 60%;
              height: 8%;
              background-color: green;
              margin-top: 30px;
          }
          .text{
              width:70%;
              height: 60%;
          }
          .button{
              height:60%;
              width: 14%;
              color: blue;
          }
          .form{
              display: flex;
              justify-content: center;
              align-items: center;
              width: 80%;
          }
          .list{
              display: flex;
              flex: 1; 
              flex-direction: column; 
              margin-top: 20px;
              align-items: center;
              width: 60%;
              background-color:beige
          }
          .list > div{
             display:flex;
             width: 60%;
             flex-direction: row;
             justify-content:space-evenly;
             align-items: center;
             margin-top: 6px;
             border: 3px solid black;
          }
          .list > div > section{
              display: flex;
              flex-direction: row;
              justify-content: flex-end;
          }
      </style>
    </head>
    <body class=" body h-100">
        <div class="upperBar">
            DSU-TODO
        </div>
        <div class="list">
            <% tasks.map((task) => { %>
                <div>
                    <form action="/<%= task.id%>/done" method="post" style="display: inline;">
                        <% if(task.status === 'done') {%>
                             <button type="submit">
                                    <i  class="fa-solid fa-square-check"></i>
                                </button>
                                <s> <%= task.task %> </s>      
                        <% } else { %> 
                                <button type="submit">
                                    <i  class="fa-solid fa-square-check"></i>
                                </button>
                                <span> <%= task.task %> </span>
                        <% } %>
                    </form> 
                   <section>
                       <form action="/<%= task.id %>/update" method="post" style="display: inline;">
                           <button  type="submit"  >
                               <i class="fa-solid fa-pen"></i>
                           </button>
                       </form>
                       <form action="/<%= task.id %>/delete" method="post" style="display: inline;">
                           <button type="submit"> 
                               <i class="fa-solid fa-trash-can"></i>
                           </button>
                       </form>
                   </section>
                </div>
            <% }); %>   
        </div>
        <div class="inputButtom">
            <form  class="form" method="post" action="<% if(index) {%>  /<%= index %>/task <% } else { %> task <%}%>" >
                <input  class="text" name="task" type="text" <% if(taskToUpdate) {%> value="<%= taskToUpdate%>"<%}%> />
                <button class="button" id="btn"><% if(taskToUpdate) {%> Update <% } else { %>Add<%}%></button>
            </form>
        </div>
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
            crossorigin="anonymous"
        ></script>
       
    </body>
</html>